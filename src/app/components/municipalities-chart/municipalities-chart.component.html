<div class="flex flex-col">
  <h3
    class="heading text-xl sm:text-2xl md:text-3xl self-center md:self-start text-center text-primary border-secondary font-semibold">
    {{ title }}
  </h3>
  <div class="flex flex-col-reverse items-center mt-2 lg:flex-row gap-2">
    <div
      [ngClass]="{ 'lg:w-full': !showMap, 'lg:w-2/3': showMap }"
      class="w-full flex-auto overflow-hidden mt-2 pt-1"
      dir="ltr">
      <apx-chart
        #chart
        class="custom-toolbar [&>div]:ml-[-22px]"
        [series]="chartOptions.series!"
        [chart]="chartOptions.chart!"
        [xaxis]="chartOptions.xaxis!"
        [stroke]="chartOptions.stroke!"
        [colors]="chartOptions.colors!"
        [dataLabels]="chartOptions.dataLabels!"
        [legend]="chartOptions.legend!"
        [markers]="chartOptions.markers!"
        [grid]="chartOptions.grid!"
        [yaxis]="chartOptions.yaxis!"
        [tooltip]="chartOptions.tooltip!"
        [plotOptions]="chartOptions.plotOptions!"
        [title]="chartOptions.title!" />
    </div>
    <div *ngIf="showMap" class="w-full lg:w-1/3 mt-4">
      <app-qatar-interactive-map
        [municipalitiesData]="getMapData()"
        [label]="getMapLabel()"
        [unit]="unit"
        [selectedMunicipalityId]="selectedMunicipality.id"
        (selectedMunicipalityChanged)="onMapSelectedMunicipalityChanged($event)" />
    </div>
  </div>
</div>
